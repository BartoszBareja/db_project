{% extends "base.html" %}
{% block title %}Not Steam - Strona Główna{% endblock %}

{% block content %}
<div class="section_titles">
  <h2>Recommended games</h2>
</div>

<!-- Karuzela 1 -->
<div class="carousel-wrapper">
  <div class="swiper carousel1">
    <div class="swiper-wrapper">
      {% for game in carousel_games %}
  <div class="swiper-slide">
    <a href="/game/{{ game.id }}">
      <img src="/static/images/{{ game.filename or 'placeholder.jpg' }}" alt="{{ game.title }}" />
      <p>{{ game.title }}</p>
    </a>
  </div>
{% endfor %}
    </div>
    <div class="swiper-button-prev swiper-button-prev-1"></div>
    <div class="swiper-button-next swiper-button-next-1"></div>
    <div class="swiper-pagination swiper-pagination-1"></div>
  </div>
</div>

<div class="section_titles">
  <h2>New games</h2>
</div>

<!-- Karuzela 2 -->
<!-- Karuzela 2 -->
<div class="carousel-wrapper">
  <div class="swiper carousel2">
    <div class="swiper-wrapper">
      {% for game in new_games %}
      <div class="tile swiper-slide">
        <a href="/game/{{ game.id }}">
          <img src="/static/images/{{ game.image_filename or 'placeholder.jpg' }}" alt="{{ game.title }}">
          <p>{{ game.title }}</p>
        </a>
      </div>
      {% endfor %}
    </div>
    <div class="swiper-button-prev swiper-button-prev-2"></div>
    <div class="swiper-button-next swiper-button-next-2"></div>
    <div class="swiper-pagination swiper-pagination-2"></div>
  </div>
</div>


<div>
  <h2 class="section_titles">Genres</h2>
</div>

<!-- Kafelki -->
<div class="tiles-section">
  <div class="tiles-grid">
    {% for genre in genres_with_game %}
  <div class="tile">
    <a href="/genre/{{ genre.genre_id }}">
      <img src="/static/images/{{ genre.image_filename or 'placeholder.jpg' }}" alt="{{ genre.genre_name }}">
      <p>{{ genre.genre_name }}<br><small>({{ genre.game_title }})</small></p>
    </a>
  </div>
{% endfor %}

  </div>
</div>

<div class="rating-bar">
  <p>Oceń stronę:</p>
  <div class="stars">
    <span class="star" data-value="1">&#9734;</span>
    <span class="star" data-value="2">&#9734;</span>
    <span class="star" data-value="3">&#9734;</span>
    <span class="star" data-value="4">&#9734;</span>
    <span class="star" data-value="5">&#9734;</span>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  new Swiper('.carousel1', {
    slidesPerView: 3,
    loop: true,
    spaceBetween: 20,
    navigation: {
      nextEl: '.swiper-button-next-1',
      prevEl: '.swiper-button-prev-1',
    },
    pagination: {
      el: '.swiper-pagination-1',
      clickable: true,
    },
  });

  new Swiper('.carousel2', {
    slidesPerView: 6,
    loop: true,
    spaceBetween: 15,
    navigation: {
      nextEl: '.swiper-button-next-2',
      prevEl: '.swiper-button-prev-2',
    },
    pagination: {
      el: '.swiper-pagination-2',
      clickable: true,
    },
  });

  const stars = document.querySelectorAll('.star');
  stars.forEach(star => {
    star.addEventListener('click', () => {
      const rating = parseInt(star.getAttribute('data-value'));
      stars.forEach(s => {
        s.classList.toggle('filled', parseInt(s.getAttribute('data-value')) <= rating);
      });
    });
  });

  menuToggle.addEventListener('click', () => {
  sidebar.classList.toggle('hidden');

  if (sidebar.classList.contains('hidden')) {
    menuToggle.style.left = '15px';
  } else {
    menuToggle.style.left = '240px'; // przesunięcie, by nie było pod sidebar
  }
});

</script>
{% endblock %}
